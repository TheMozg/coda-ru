# Тестирование компонентно-ориентированного ПО
## Введение
В предыдущих главах мы узнали о принципах КОРС, различных компонентных моделях, доступных в Java, а и о том как разрабатывать и проектировать компонентно-ориентированную систему. В этой главе мы рассмотрим тестирование системных компонентов. Тестирование играет большую роль в обеспечении качества ПО. Как мы увидим дальше, тестирование системных компонентов немного отличается традиционного тестирования.
## Понятия в тестировании ПО
Как и во всех других сферах жизни, человеку свойственно ошибаться и в разработке программного обеспечения. Без надлежащего тестирования нельзя считать, что программное обеспечение является правильным, полным, и хорошего качества. После того как команда программистов закончит разработку, независимая группа тестировщиков проводит контроль качества разработанного ПО. Тестирование выявляет ошибки в реализации логики, особенности, пропущенные при реализации, и другие качественные недостатки. Все это записывается как дефекты программы. После первого раунда тестирования обнаруженные дефекты устраняются и продукт подвергается следующему раунду тестирования. Контроль качества ПО может включать в себя несколько раундов тестирования, устранения ошибок и повторного тестирования, пока ошибки не будут уменьшены до приемлемого уровня.

Различные типы тестов проводятся на различных этапах традиционного жизненного цикла разработки ПО. Некоторые виды тестов проверяют соответствующие артефакты процесса разработки, а не самого продукта. Мы сосредоточимся на методах тестирования, охватывающих программу, а не артефакты.

По ходу процесса разработки, когда небольшие модули ПО становятся законченными, разработчики проводят модульное тестирование готовых модулей.

Модульное тестирование подразумевает проверку разработанного ПО на основе знаний о внутренней спецификации реализации и фактической реализации программного обеспечения. Такое тестирование называется тестированием методом белого ящика.

Когда отдельные разработчики завершают программирование поставленных задач, участки программы собираются воедино и интегрируются. Проводятся тесты чтобы убедиться, что блоки ПО работают и взаимодействуют согласно спецификации. Тестирование на этом этапе известно как интеграционное тестирование. Как правило, интеграционное тестирование использует принцип белого ящика.

Когда программное обеспечение для всей системы готово, система проверяется на соответствие техническим требованиям. Этот этап тестирования известен как системное тестирование. В отличие от двух других фаз тестов, в которых применялось тестирование белого ящика, системное тестирование относится ко всей системе как к черному ящику, без каких-либо предположений о реализации. Смысл тестов черного ящика в том, чтобы убедиться что функциональность всей системы соответствует указанной в спецификации. Тестовые случаи разрабатываются только с оглядкой на спецификацию, без знаний о требований к реализации или знаний о самой реализации. Такое тестирование называется тестированием черного ящика.
## Понятия в тестировании компонентно-ориентированного ПО
Цикл разработки компонентно-ориентированного ПО отличается от традиционного жизненного цикла разработки как уже описано в главе 1.8. В этой главе объясняется, что компоненты берутся либо уже в готовом виде, либо разрабатываются до сборки в систему. В любом случае, до сборки компоненты нужно протестировать. Тестирование компонентов можно в общем разделить на функциональное тестирование и тестирование качества сервиса.

Функциональное тестирование включает:
1. Проверку интерфейсов компонентов
2. Проверку реализации компонентов - тестирование белого ящика
3. Тестирование функциональности компонентов - тестирование белого ящика

Тестирование качества сервиса включает:
1. Проверку производительности компонентов
2. Проверку обработки ошибок компонента
3. Проверку точности данных компонента
4. Проверку функциональности компонента на восстановление после ошибок
5. Проверку возможности повторного использования компонента
6. Проверку надежности компонента
7. Оценку возможной степени поддержки компонента

В оставшейся части этой главы мы подробно остановимся на функциональном тестировании с примерами. Тестирование качества сервиса выходит за рамки этой книги. После того, как программные компоненты были собраны вместе в качестве системы, система в целом проходит проверку, подобную системному тестированию. Объем тестирование системы и подход остаются теми же, независимо от того, является ли система компонентно-ориентированной или нет.

## Валидация интерфейсов компонента
На этом этапе тестировщик проверяет, что реализация компонента обеспечивает интерфейсы, которые были указаны в спецификациях компонентов. Тестирование может происходить как методом белого ящика, так и методом черного ящика.

При использовании методики тестирования белого ящика, тестировщик проверяет код компонента на наличие реализации интерфейсов, соответствующей спецификации.

При использовании методики тестирования черного ящика, тестировщик развертывает компонент в интегрированной среде компонентов вместе с тестовым драйвером. Во время теста тестовый драйвер пытается использовать предоставленный интерфейс. Тест считается пройденным при успешной интеграции тестового драйвера и тестируемого компонента. Рассмотрим оба метода на примере.

### Пример валидации белого ящика
Рассмотрим компонент TableBiz из примера POS, с которым мы познакомились в главе 4. Чтобы рассмотрим метод тестирования, используя OSGi реализацию компонентной модели (смотри cекцию 5.8). Спецификация компонента TableBiz указывает, что он должен предоставлять интерфейс, показанный ниже:
```java
public interface ITableBiz {

	public abstract int getNoOfTables();

	public abstract List<Table> getOccupiedTables();

	public abstract List<Table> getEmptyTables();

	public abstract void occupyTable(Table table, int noOfGuests, String waiter)
			throws Exception;

	public abstract void unOccupyTable(Table table) throws Exception;

	public abstract void canPayBill(Table table) throws Exception;

	public abstract void reconfigureTables(int newNoOfTables) throws Exception;

	public abstract void canTableTakeOrders(Table table) throws Exception;

}
```

Давайте воспользуемся методикой тестирования белого ящика, чтобы проверить, что компонент TableBiz предоставляет интерфейс. С случае тестирования белого ящика, мы проверяем исходный код реализации TableBiz компонента. Мы видим из исходного кода, что компонент выполнен в виде OSGi модуля, и модуль содержит класс TableBiz. Класс TableBiz реализует java интерфейс ITableBiz. Дальше мы замечаем, что OSGi модуль включает описание декларативного сервиса, задающего класс TableBiz в качестве класс-компонента, который предоставляет интерфейс ITableBiz, как показано ниже:

